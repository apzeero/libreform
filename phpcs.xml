<?xml version="1.0"?>
<ruleset name="wp-libre-form">
  <description>For nicer WordPress and PHP development</description>

  <!-- Files and directories to parse -->
  <file>./classes/</file>
  <file>./lib/</file>
  <file>./index.php</file>

  <!-- Excluded directories and files -->
  <exclude-pattern>*/vendor/*</exclude-pattern>
  <exclude-pattern>*/lang/*</exclude-pattern>
  <exclude-pattern>*/assets/*</exclude-pattern>
  <exclude-pattern>*.js</exclude-pattern>

  <!-- Use 2 spaces for indentation -->
  <arg name="tab-width" value="2"/>
  <rule ref="Generic.WhiteSpace.ScopeIndent">
    <properties>
      <property name="indent" value="2"/>
    </properties>
  </rule>

  <!-- This means almost always that developer used an ugly hotfix -->
  <rule ref="Squiz.PHP.CommentedOutCode"/>

  <!-- Don't allow random whitespacing into multiple lines-->
  <rule ref="Squiz.WhiteSpace.SuperfluousWhitespace"/>

  <!-- Don't put unused function parameters into function definition -->
  <!-- This might be problematic when using wp actions/filters -->
  <!-- This is mostly useful, We should give warning instead -->
  <rule ref="Generic.CodeAnalysis.UnusedFunctionParameter"/>

  <!-- No TODO comments, open issues in github/gogs/gitlab instead -->
  <rule ref="Generic.Commenting.Todo"/>

  <!-- Don't allow oneliner ifs without brackets {} -->
  <rule ref="Generic.ControlStructures.InlineControlStructure"/>

  <rule ref="PSR12">
    <!-- I've never been a fan of using underscores either, especially in "OOP", but
    I'm not changing method names without a further discussion -->
    <exclude name="PSR1.Methods.CamelCapsMethodName.NotCamelCaps" />

    <!-- I don't understand why PSR2 uses this rule as well as defining their own identical rule. -->
    <exclude name="Squiz.Classes.ValidClassName.NotCamelCaps" />

    <!-- Yeah how about no, K&R FTW -->
    <exclude name="Squiz.Functions.MultiLineFunctionDeclaration.BraceOnSameLine" />
    <exclude name="PSR2.Classes.ClassDeclaration.OpenBraceNewLine" />

    <!-- This isn't MVC. Don't make life hard for trying to use HTML. -->
    <exclude name="Generic.WhiteSpace.ScopeIndent.IncorrectExact" />
  </rule>

  <!-- Require the brace to be on the same line -->
  <rule ref="Generic.Functions.OpeningFunctionBraceKernighanRitchie" />
</ruleset>
